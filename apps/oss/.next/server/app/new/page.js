(()=>{var e={};e.id=453,e.ids=[453],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3559:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>d}),s(324),s(1558),s(5676);var r=s(3967),a=s(9886),n=s(2954),i=s.n(n),l=s(7014),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["new",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,324)),"/home/runner/work/sparktest/sparktest/apps/oss/app/new/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1558)),"/home/runner/work/sparktest/sparktest/apps/oss/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5676,23)),"next/dist/client/components/not-found-error"]}],c=["/home/runner/work/sparktest/sparktest/apps/oss/app/new/page.tsx"],u="/new/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/new/page",pathname:"/new",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},3598:(e,t,s)=>{Promise.resolve().then(s.bind(s,5520)),Promise.resolve().then(s.t.bind(s,4416,23))},5520:(e,t,s)=>{"use strict";s.d(t,{NewTestForm:()=>f});var r=s(3029),a=s(2056),n=s(8956),i=s(1027),l=s(2497),o=s(4888),d=s(6907),c=s(3910),u=s(6920),m=s(6710),p=s(8637);function f(){let e=(0,n.useRouter)(),{toast:t}=(0,m.pm)(),[s,f]=(0,a.useState)(!1),[x,h]=(0,a.useState)([]),[g,y]=(0,a.useState)(""),[v,j]=(0,a.useState)({name:"",image:"",commands:[""]}),w=e=>{j(t=>({...t,commands:t.commands.filter((t,s)=>s!==e)}))},N=(e,t)=>{j(s=>({...s,commands:s.commands.map((s,r)=>r===e?t:s)}))},b=async s=>{s.preventDefault(),f(!0);try{let s=await fetch("http://localhost:3001/api/test-runs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({test_definition_id:g,name:v.name,image:v.image,commands:v.commands.filter(Boolean)})});if(!s.ok)throw Error("Failed to create test");let r=await s.json();t({title:"Test created successfully",description:`Test ID: ${r.id}`}),e.push("/")}catch(e){t({title:"Error creating test",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}finally{f(!1)}};return r.jsx("form",{onSubmit:b,children:(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[r.jsx(d.ll,{children:"Test Configuration"}),r.jsx(d.SZ,{children:"Configure your test to run in Kubernetes. SparkTest will create a job based on these settings."})]}),(0,r.jsxs)(d.aY,{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"test-def",children:"Test Definition"}),(0,r.jsxs)(p.Ph,{onValueChange:y,children:[r.jsx(p.i4,{id:"test-def",children:r.jsx(p.ki,{placeholder:"Select a test definition"})}),r.jsx(p.Bw,{children:x.map(e=>r.jsx(p.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"name",children:"Test Name"}),r.jsx(c.I,{id:"name",placeholder:"e.g., api-integration-tests",value:v.name,onChange:e=>j({...v,name:e.target.value}),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx(u._,{htmlFor:"image",children:"Container Image"}),r.jsx(c.I,{id:"image",placeholder:"e.g., node:18-alpine",value:v.image,onChange:e=>j({...v,image:e.target.value}),required:!0}),r.jsx("p",{className:"text-sm text-muted-foreground",children:"The Docker image that contains your test code and dependencies"})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[r.jsx(u._,{children:"Commands"}),(0,r.jsxs)(o.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{j(e=>({...e,commands:[...e.commands,""]}))},children:[r.jsx(i.Z,{className:"mr-2 h-4 w-4"}),"Add Command"]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[v.commands.map((e,t)=>(0,r.jsxs)("div",{className:"flex gap-2",children:[r.jsx(c.I,{placeholder:`e.g., npm test${t>0?` (command ${t+1})`:""}`,value:e,onChange:e=>N(t,e.target.value),required:0===t}),t>0&&(0,r.jsxs)(o.z,{type:"button",variant:"outline",size:"icon",onClick:()=>w(t),children:[r.jsx(l.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Remove command"})]})]},t)),r.jsx("p",{className:"text-sm text-muted-foreground",children:"Commands will be executed in sequence. First command is required."})]})]})]}),(0,r.jsxs)(d.eW,{className:"flex justify-between",children:[r.jsx(o.z,{variant:"outline",type:"button",onClick:()=>e.push("/"),children:"Cancel"}),r.jsx(o.z,{type:"submit",disabled:s,children:s?"Creating...":"Create Test"})]})]})})}},6907:(e,t,s)=>{"use strict";s.d(t,{Ol:()=>l,SZ:()=>d,Zb:()=>i,aY:()=>c,eW:()=>u,ll:()=>o});var r=s(3029),a=s(2056),n=s(1080);let i=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("w-full rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));i.displayName="Card";let l=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",e),...t}));l.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...t}));d.displayName="CardDescription";let c=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("p-6 pt-0",e),...t}));c.displayName="CardContent";let u=a.forwardRef(({className:e,...t},s)=>r.jsx("div",{ref:s,className:(0,n.cn)("flex items-center gap-2 p-6 pt-0",e),...t}));u.displayName="CardFooter"},6920:(e,t,s)=>{"use strict";s.d(t,{_:()=>d});var r=s(3029),a=s(2056),n=s(2614),i=s(9848),l=s(1080);let o=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=a.forwardRef(({className:e,...t},s)=>r.jsx(n.f,{ref:s,className:(0,l.cn)(o(),e),...t}));d.displayName=n.f.displayName},8637:(e,t,s)=>{"use strict";s.d(t,{Bw:()=>x,Ph:()=>c,Ql:()=>h,i4:()=>m,ki:()=>u});var r=s(3029),a=s(2056),n=s(4744),i=s(4921),l=s(841),o=s(3854),d=s(1080);let c=n.fC;n.ZA;let u=n.B4,m=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...s,children:[t,r.jsx(n.JO,{asChild:!0,children:r.jsx(i.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=n.xz.displayName;let p=a.forwardRef(({className:e,...t},s)=>r.jsx(n.u_,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(l.Z,{className:"h-4 w-4"})}));p.displayName=n.u_.displayName;let f=a.forwardRef(({className:e,...t},s)=>r.jsx(n.$G,{ref:s,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...t,children:r.jsx(i.Z,{className:"h-4 w-4"})}));f.displayName=n.$G.displayName;let x=a.forwardRef(({className:e,children:t,position:s="popper",...a},i)=>r.jsx(n.h_,{children:(0,r.jsxs)(n.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:s,...a,children:[r.jsx(p,{}),r.jsx(n.l_,{className:(0,d.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),r.jsx(f,{})]})}));x.displayName=n.VY.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(n.__,{ref:s,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t})).displayName=n.__.displayName;let h=a.forwardRef(({className:e,children:t,...s},a)=>(0,r.jsxs)(n.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[r.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:r.jsx(n.wU,{children:r.jsx(o.Z,{className:"h-4 w-4"})})}),r.jsx(n.eT,{children:t})]}));h.displayName=n.ck.displayName,a.forwardRef(({className:e,...t},s)=>r.jsx(n.Z0,{ref:s,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...t})).displayName=n.Z0.displayName},6710:(e,t,s)=>{"use strict";s.d(t,{pm:()=>m});var r=s(2056);let a=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);n.set(e,t)},l=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?i(s):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},o=[],d={toasts:[]};function c(e){d=l(d,e),o.forEach(e=>{e(d)})}function u({...e}){let t=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function m(){let[e,t]=r.useState(d);return r.useEffect(()=>(o.push(t),()=>{let e=o.indexOf(t);e>-1&&o.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},2497:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});let r=(0,s(1663).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},324:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>o});var r=s(7796),a=s(6802),n=s(5633),i=s(9747);let l=(0,s(7824).createProxy)(String.raw`/home/runner/work/sparktest/sparktest/apps/oss/components/new-test-form.tsx#NewTestForm`);function o(){return r.jsx("div",{className:"flex min-h-screen flex-col",children:r.jsx("main",{className:"flex-1",children:r.jsx("div",{className:"container py-6",children:(0,r.jsxs)("div",{className:"mx-auto max-w-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[r.jsx(i.z,{variant:"ghost",size:"icon",asChild:!0,children:(0,r.jsxs)(a.default,{href:"/",children:[r.jsx(n.Z,{className:"h-4 w-4"}),r.jsx("span",{className:"sr-only",children:"Back"})]})}),r.jsx("h1",{className:"text-2xl font-bold",children:"Create New Test"})]}),r.jsx(l,{})]})})})})}},9747:(e,t,s)=>{"use strict";let r,a;s.d(t,{z:()=>h});var n=s(7796),i=s(6593);function l(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var o=function(e){let t=function(e){let t=i.forwardRef((e,t)=>{let{children:s,...r}=e;if(i.isValidElement(s)){let e,a;let n=(e=Object.getOwnPropertyDescriptor(s.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.ref:(e=Object.getOwnPropertyDescriptor(s,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?s.props.ref:s.props.ref||s.ref,o=function(e,t){let s={...t};for(let r in t){let a=e[r],n=t[r];/^on[A-Z]/.test(r)?a&&n?s[r]=(...e)=>{let t=n(...e);return a(...e),t}:a&&(s[r]=a):"style"===r?s[r]={...a,...n}:"className"===r&&(s[r]=[a,n].filter(Boolean).join(" "))}return{...e,...s}}(r,s.props);return s.type!==i.Fragment&&(o.ref=t?function(...e){return t=>{let s=!1,r=e.map(e=>{let r=l(e,t);return s||"function"!=typeof r||(s=!0),r});if(s)return()=>{for(let t=0;t<r.length;t++){let s=r[t];"function"==typeof s?s():l(e[t],null)}}}}(t,n):n),i.cloneElement(s,o)}return i.Children.count(s)>1?i.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=i.forwardRef((e,s)=>{let{children:r,...a}=e,l=i.Children.toArray(r),o=l.find(c);if(o){let e=o.props.children,r=l.map(t=>t!==o?t:i.Children.count(e)>1?i.Children.only(null):i.isValidElement(e)?e.props.children:null);return(0,n.jsx)(t,{...a,ref:s,children:i.isValidElement(e)?i.cloneElement(e,void 0,r):null})}return(0,n.jsx)(t,{...a,ref:s,children:r})});return s.displayName=`${e}.Slot`,s}("Slot"),d=Symbol("radix.slottable");function c(e){return i.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===d}var u=s(1763);let m=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,p=u.W;var f=s(1624);let x=(r="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if((null==a?void 0:a.variants)==null)return p(r,null==e?void 0:e.class,null==e?void 0:e.className);let{variants:s,defaultVariants:n}=a,i=Object.keys(s).map(t=>{let r=null==e?void 0:e[t],a=null==n?void 0:n[t];if(null===r)return null;let i=m(r)||m(a);return s[t][i]}),l=e&&Object.entries(e).reduce((e,t)=>{let[s,r]=t;return void 0===r||(e[s]=r),e},{});return p(r,i,null==a?void 0:null===(t=a.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:s,className:r,...a}=t;return Object.entries(a).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...n,...l}[t]):({...n,...l})[t]===s})?[...e,s,r]:e},[]),null==e?void 0:e.class,null==e?void 0:e.className)}),h=i.forwardRef(({className:e,variant:t,size:s,asChild:r=!1,...a},i)=>{let l=r?o:"button";return n.jsx(l,{className:(0,f.cn)(x({variant:t,size:s,className:e})),ref:i,...a})});h.displayName="Button"},1624:(e,t,s)=>{"use strict";s.d(t,{cn:()=>n});var r=s(1763),a=s(4519);function n(...e){return(0,a.m6)((0,r.W)(e))}},5633:(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var r=s(6593);let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),n=(...e)=>e.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim();var i={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(0,r.forwardRef)(({color:e="currentColor",size:t=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:l="",children:o,iconNode:d,...c},u)=>(0,r.createElement)("svg",{ref:u,...i,width:t,height:t,stroke:e,strokeWidth:a?24*Number(s)/Number(t):s,className:n("lucide",l),...c},[...d.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]])),o=((e,t)=>{let s=(0,r.forwardRef)(({className:s,...i},o)=>(0,r.createElement)(l,{ref:o,iconNode:t,className:n(`lucide-${a(e)}`,s),...i}));return s.displayName=`${e}`,s})("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},6802:(e,t,s)=>{"use strict";s.d(t,{default:()=>a.a});var r=s(3304),a=s.n(r)},3304:(e,t,s)=>{"use strict";let{createProxy:r}=s(7824);e.exports=r("/home/runner/work/sparktest/sparktest/node_modules/.pnpm/next@14.2.16_@babel+core@7.28.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/next/dist/client/link.js")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[667,447,582,564,19,989],()=>s(3559));module.exports=r})();